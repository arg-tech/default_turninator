meta {
  name: Monolog simple
  type: http
  seq: 1
}

post {
  url: {{baseUrl}}/turninator-01
  body: multipartForm
  auth: inherit
}

headers {
  Content-Type: multipart/form-data
}

body:multipart-form {
  file: @file(test-inputs/monolog_sample.txt)
}

tests {
  const expectedData =
  {
    "AIF": {
      "nodes": [
        {
          "text": "This is a sample argument about climate change. We need to take action now to reduce carbon emissions. The scientific evidence is overwhelming and shows that human activities are the primary cause of global warming. Therefore, we must implement stricter environmental regulations.",
          "type": "L",
          "nodeID": 0
        }
      ],
      "edges": [],
      "locutions": [
        {
          "personID": 1,
          "nodeID": 0
        }
      ],
      "schemefulfillments": [],
      "descriptorfulfillments": [],
      "participants": [
        {
          "participantID": 1,
          "firstname": "Default",
          "surname": "Speaker"
        }
      ]
    },
    "ova": {},
    "dialog": {},
    "text": {
      "txt": " Default Speaker <span class=\"highlighted\" id=\"0\">This is a sample argument about climate change. We need to take action now to reduce carbon emissions. The scientific evidence is overwhelming and shows that human activities are the primary cause of global warming. Therefore, we must implement stricter environmental regulations.</span>.<br><br>"
    }
  };
  
  // And this is how long the request should take before deemed too slow:
  const maxTimeToReturnInMilliseconds = 300;
  
  test("Response should match expected value", function () {
    const receivedData = res.getBody();
    expect(receivedData).to.deep.equal(expectedData);
  });
  
  test(`Response time should be faster than ${maxTimeToReturnInMilliseconds} milliseconds`, function () {
    expect(res.responseTime).to.be.below(maxTimeToReturnInMilliseconds);
  });
}

settings {
  encodeUrl: false
  timeout: 0
}
