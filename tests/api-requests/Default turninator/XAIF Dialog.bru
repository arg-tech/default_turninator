meta {
  name: XAIF Dialog
  type: http
  seq: 2
}

post {
  url: {{baseUrl}}/turninator-01
  body: multipartForm
  auth: inherit
}

headers {
  Content-Type: multipart/form-data
}

body:multipart-form {
  file: @file(test-inputs/xaif_dialog.json)
}

tests {
  const expectedData =
  {
    "AIF": {
      "nodes": [
        {
          "text": "We should invest in education.",
          "type": "L",
          "nodeID": 0
        },
        {
          "text": "I think healthcare is more important.",
          "type": "L",
          "nodeID": 1
        }
      ],
      "edges": [],
      "locutions": [
        {
          "personID": 0,
          "nodeID": 0
        },
        {
          "personID": 1,
          "nodeID": 1
        }
      ],
      "participants": [
        {
          "participantID": 0,
          "firstname": "Alice",
          "surname": "None"
        },
        {
          "participantID": 1,
          "firstname": "Bob",
          "surname": "None"
        }
      ],
      "schemefulfillments": [],
      "descriptorfulfillments": []
    },
    "text": {
      "txt": " Alice None <span class=\"highlighted\" id=\"0\">We should invest in education.</span>.<br><br> Bob None <span class=\"highlighted\" id=\"1\">I think healthcare is more important.</span>.<br><br>"
    },
    "dialog": true,
    "OVA": {},
    "ova": {}
  };
  
  // And this is how long the request should take before deemed too slow:
  const maxTimeToReturnInMilliseconds = 300;
  
  test("Response should match expected value", function () {
    const receivedData = res.getBody();
    expect(receivedData).to.deep.equal(expectedData);
  });
  
  test(`Response time should be faster than ${maxTimeToReturnInMilliseconds} milliseconds`, function () {
    expect(res.responseTime).to.be.below(maxTimeToReturnInMilliseconds);
  });
}
